<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Web App</title>
        <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
        <script>
            const { createClient } = supabase;
        </script>
        <script src="/Web-App/supabase.js"></script>
    </head>
    <body>
        <h1>This is the main page</h1>

        <button onclick="signOut()">Sign Out</button>

        <table>
            <tr>
                <th id="00"></th>
                <th id="10">Monday</th>
                <th id="20">Tuesday</th>
                <th id="30">Wednesday</th>
                <th id="40">Thursday</th>
                <th id="50">Friday</th>
                <th id="60">Saturday</th>
                <th id="70">Sunday</th>
            </tr>

            <tr>
                <th id="01"></th>
                <th id="11"></th>
                <th id="21"></th>
                <th id="31"></th>
                <th id="41"></th>
                <th id="51"></th>
                <th id="61"></th>
                <th id="71"></th>
            </tr>

            <tr>
                <th id="02"></th>
                <th id="12"></th>
                <th id="22"></th>
                <th id="32"></th>
                <th id="42"></th>
                <th id="52"></th>
                <th id="62"></th>
                <th id="72"></th>
            </tr>
        </table>
    </body>

    <!-- main script -->
    <script type="text/javascript">
        // check if a user is signed in otherwise redirect to signin
        document.addEventListener("DOMContentLoaded", async function () {
            const userid = await checkSession();
            if (userid) {
                console.log(userid);
            } else {
                window.location.href = "/Web-App/auth/signin.html";
            }

            getData();
        })

        function getData() {
            supabase
                .from("course")
                .select("*")
                .eq("userid", userid)
                .then(({ data: course, error }) => {
                    if (error) {
                        console.error("Error:", error.message);
                    } else {
                        console.log("Data:", course);
                    }
                });
        }

    </script>
</html>
